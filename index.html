<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cookie Kliker</title>
  <!-- Tailwind CSS for responsive design -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- WalletConnect Modal -->
  <script type="module">
    import { WalletConnectModal } from 'https://cdn.jsdelivr.net/npm/@walletconnect/modal@2.6.2/+esm';
    window.WalletConnectModal = WalletConnectModal;
  </script>
  <style>
    body {
      background: linear-gradient(to bottom right, #d0e7ff, #f3e6ff);
      font-family: sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    #cookie {
      width: 150px;
      height: 150px;
      transition: transform 0.1s;
    }
    #cookie:active {
      transform: scale(0.95);
    }
    .click-animation {
      position: absolute;
      font-size: 1.5rem;
      color: #7b61ff;
      animation: rise 0.8s ease-out forwards;
    }
    @keyframes rise {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-50px); }
    }
    @media (max-width: 640px) {
      #logo { width: 200px; }
      #cookie { width: 100px; height: 100px; }
      #points { font-size: 1.5rem; }
    }
  </style>
</head>
<body class="text-center">
  <img id="logo" src="images/logo.png" alt="Cookie Kliker Logo" class="mb-6" />
  <div id="points" class="text-3xl mb-6 text-gray-800">Points: 0</div>
  <button id="cookie" aria-label="Click to earn a cookie point" class="bg-transparent border-none cursor-pointer">
    <img src="images/cookie.png" alt="Cookie" class="w-full h-full" />
  </button>
  <button id="connectBtn" class="mt-8 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-lg">
    Connect Wallet
  </button>
  <div class="social-bar mt-10 flex justify-center gap-4">
    <a href="https://x.com/cookieklick" target="_blank" class="text-purple-600 font-bold text-lg hover:underline">Twitter</a>
    <a href="https://etherscan.io" target="_blank" class="text-purple-600 font-bold text-lg hover:underline">Etherscan</a>
  </div>

  <script type="module">
    // Initialize points from localStorage
    let points = parseInt(localStorage.getItem("points")) || 0;
    const pointsDisplay = document.getElementById("points");
    pointsDisplay.textContent = `Points: ${points}`;

    // Cookie click handler
    const cookie = document.getElementById("cookie");
    cookie.addEventListener("click", (e) => {
      points++;
      localStorage.setItem("points", points);
      pointsDisplay.textContent = `Points: ${points}`;
      const anim = document.createElement("div");
      anim.textContent = "+1";
      anim.className = "click-animation";
      anim.style.left = `${e.clientX - 10}px`;
      anim.style.top = `${e.clientY - 20}px`;
      document.body.appendChild(anim);
      setTimeout(() => document.body.removeChild(anim), 800);
    });

    // WalletConnect Modal
    const connectBtn = document.getElementById("connectBtn");
    const modal = new window.WalletConnectModal({
      projectId: "002e4f1d7a50dbde0ea2146886850d11", // Get from https://cloud.walletconnect.com
      chains: ["eip155:1"], // Ethereum mainnet
    });
    connectBtn.addEventListener("click", async () => {
      try {
        const { uri, approval } = await modal.connect();
        const session = await approval();
        console.log("Wallet connected:", session.namespaces);
        alert("Connected to wallet!");
        connectBtn.textContent = "Wallet Connected";
        connectBtn.disabled = true;
      } catch (error) {
        console.error("Connection failed:", error);
        alert("Failed to connect wallet. Please try again.");
      }
    });
  </script>
</body>
</html>
